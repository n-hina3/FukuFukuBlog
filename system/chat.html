<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Team Archive | △○□</title>
  <link rel="icon" href="../dinosaurs2.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* 簡易CSS (archive.cssの内容を埋め込み) */
    @import url('https://fonts.googleapis.com/css2?family=Jost:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap');
    :root { --bg-dark: #0f0f0f; --bg-sidebar: #1a1a1a; --bg-panel: #252525; --text-main: #e0e0e0; --text-dim: #888; --accent: #00ff41; --border: #333; }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: "Noto Sans JP", sans-serif; background-color: var(--bg-dark); color: var(--text-main); height: 100vh; overflow: hidden; }
    .app-container { display: flex; height: 100%; }
    .sidebar { width: 250px; background-color: var(--bg-sidebar); border-right: 1px solid var(--border); display: flex; flex-direction: column; }
    .sidebar-header { padding: 30px 20px; border-bottom: 1px solid var(--border); }
    .team-logo { font-family: "Jost", sans-serif; font-size: 1.5rem; font-weight: bold; letter-spacing: 0.2em; color: var(--accent); }
    .team-name { font-size: 0.8rem; color: var(--text-dim); margin-top: 5px; }
    .nav-menu { padding: 20px; flex: 1; }
    .nav-item { width: 100%; text-align: left; background: none; border: none; color: var(--text-dim); padding: 12px 15px; margin-bottom: 5px; border-radius: 6px; cursor: pointer; font-size: 0.95rem; transition: all 0.2s; display: flex; align-items: center; gap: 10px; }
    .nav-item:hover, .nav-item.active { background-color: var(--bg-panel); color: #fff; }
    .nav-item.active { color: var(--accent); font-weight: bold; }
    .sidebar-footer { padding: 20px; border-top: 1px solid var(--border); }
    .logout-btn { color: var(--text-dim); text-decoration: none; font-size: 0.9rem; transition: color 0.2s; }
    .logout-btn:hover { color: #fff; }
    .main-content { flex: 1; position: relative; overflow: hidden; }
    .view-section { position: absolute; top: 0; left: 0; width: 100%; height: 100%; padding: 40px; overflow-y: auto; opacity: 0; visibility: hidden; transform: translateY(10px); transition: all 0.3s ease; }
    .view-section.active { opacity: 1; visibility: visible; transform: translateY(0); }
    .view-header { border-bottom: 1px solid var(--border); padding-bottom: 20px; margin-bottom: 30px; }
    .view-header h2 { font-family: "Jost", sans-serif; font-weight: 400; font-size: 1.8rem; margin: 0 0 10px 0; }
    
    /* Chat */
    .chat-window { display: flex; flex-direction: column; height: calc(100% - 150px); max-width: 800px; margin: 0 auto; }
    .chat-history { flex: 1; overflow-y: auto; padding: 20px; background: var(--bg-panel); border-radius: 8px; margin-bottom: 20px; }
    .msg { display: flex; margin-bottom: 15px; align-items: flex-start; }
    .msg .avatar { width: 36px; height: 36px; border-radius: 50%; background: #444; color: #fff; display: flex; align-items: center; justify-content: center; margin-right: 10px; font-weight: bold; font-size: 0.8rem; }
    .msg.system .bubble { background: transparent; color: var(--accent); font-family: monospace; font-size: 0.85rem; border: 1px dashed var(--border); }
    .msg .bubble { background: #333; padding: 10px 15px; border-radius: 8px; font-size: 0.95rem; line-height: 1.5; max-width: 80%; }
    .chat-input-area { display: flex; gap: 10px; }
    #chat-input { flex: 1; padding: 15px; background: var(--bg-panel); border: 1px solid var(--border); color: #fff; border-radius: 4px; }
    #chat-submit { width: 50px; background: var(--accent); border: none; border-radius: 4px; color: #000; cursor: pointer; }

    /* Trash */
    .trash-container { padding: 50px; text-align: center; }
    .trash-file { display: inline-flex; flex-direction: column; align-items: center; gap: 10px; cursor: pointer; padding: 30px; border: 1px solid transparent; border-radius: 8px; transition: all 0.3s; }
    .trash-file:hover { background: rgba(255,255,255,0.05); border-color: var(--border); }
    .trash-file i.fa-file-lines { font-size: 4rem; color: var(--text-dim); }
    .trash-file .lock-icon { color: #cf6679; }

    /* Modal */
    .modal-lock { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity 0.3s; z-index: 100; }
    .modal-lock.open { opacity: 1; pointer-events: auto; }
    .modal-box { background: var(--bg-panel); padding: 40px; border-radius: 8px; width: 500px; text-align: center; position: relative; }
    .modal-box input { width: 100%; padding: 10px; background: #111; border: 1px solid var(--border); color: #fff; margin-bottom: 15px; text-align: center; }
    .modal-box button { padding: 10px 30px; background: #fff; border: none; cursor: pointer; font-weight: bold; }
    .hidden { display: none; }

    /* Truth Text */
    .truth-text-container { background: #fff; color: #333; padding: 40px; margin: 20px auto; max-width: 100%; font-family: "Yu Mincho", serif; line-height: 1.8; border-radius: 4px; text-align: left; height: 400px; overflow-y: auto; }
    .truth-title { font-size: 1.5rem; font-weight: bold; margin-bottom: 10px; text-align: center; }
    .truth-date { display: block; text-align: right; color: #666; font-size: 0.9rem; margin-bottom: 30px; }
    .truth-body p { margin-bottom: 1.5em; }
    .truth-sign { text-align: right; margin-top: 40px; font-weight: bold; }
  </style>
</head>
<body>
  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="team-logo">△○□</div>
        <p class="team-name">Project Archive</p>
      </div>
      <nav class="nav-menu">
        <button class="nav-item active" data-target="view-chat"><i class="fa-regular fa-comments"></i> Chat Log</button>
        <button class="nav-item" data-target="view-photo"><i class="fa-regular fa-images"></i> Photo</button>
        <button class="nav-item" data-target="view-movie"><i class="fa-solid fa-film"></i> Movie</button>
        <div class="nav-divider"></div>
        <button class="nav-item trash" data-target="view-trash"><i class="fa-regular fa-trash-can"></i> Trash</button>
      </nav>
      <div class="sidebar-footer">
        <a href="login.html" class="logout-btn"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>
      </div>
    </aside>

    <main class="main-content">
      <section id="view-chat" class="view-section active">
        <div class="view-header">
          <h2><i class="fa-regular fa-comments"></i> Chat Log (Search Mode)</h2>
          <p>過去の会話ログをキーワード検索できます。</p>
        </div>
        <div class="chat-window">
          <div class="chat-history" id="chat-history">
            <div class="msg system">
              <div class="bubble">System: ログの復元が完了しました。検索ワードを入力してください。</div>
            </div>
          </div>
          <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="キーワードを入力 (例: △, ○, □...)">
            <button id="chat-submit"><i class="fa-solid fa-paper-plane"></i></button>
          </div>
        </div>
      </section>

      <section id="view-photo" class="view-section">
        <div class="view-header">
          <h2><i class="fa-regular fa-images"></i> Photo Gallery</h2>
        </div>
        <div style="text-align:center; padding:50px; color:#666;">
          <i class="fa-solid fa-lock" style="font-size:3rem; margin-bottom:20px;"></i>
          <p>Data Corrupted.</p>
        </div>
      </section>

      <section id="view-movie" class="view-section">
        <div class="view-header">
          <h2><i class="fa-solid fa-film"></i> Movie Clips</h2>
        </div>
        <div style="text-align:center; padding:50px; color:#666;">
          <i class="fa-solid fa-lock" style="font-size:3rem; margin-bottom:20px;"></i>
          <p>Data Corrupted.</p>
        </div>
      </section>

      <section id="view-trash" class="view-section">
        <div class="view-header">
          <h2><i class="fa-regular fa-trash-can"></i> Trash</h2>
        </div>
        
        <div class="trash-container">
          <div class="trash-file" id="final-lock-item">
            <i class="fa-regular fa-file-lines"></i>
            <span>停止ボタンを押したあとで.txt</span>
            <i class="fa-solid fa-lock lock-icon"></i>
          </div>
        </div>

        <div class="modal-lock" id="modal-trash">
          <div class="modal-box final-box">
            <div id="modal-content-form">
              <h3>FINAL SECURITY</h3>
              <p style="color:#888; font-size:0.9rem; margin-bottom:20px;">心の形（△○□）を数字に変換して入力</p>
              <input type="text" id="pass-final" placeholder="3桁の数字" maxlength="3">
              <button id="btn-final">RECOVER DATA</button>
              <p id="error-final" style="color:#cf6679; font-size:0.8rem; margin-top:10px;"></p>
            </div>
            
            <div id="modal-content-truth" class="hidden">
              <div class="truth-text-container">
                <div class="truth-title">停止ボタンを押したあとで</div>
                <span class="truth-date">2024.11.30</span>
                <div class="truth-body">
                  <p>このページを見つけてくれて、ありがとう。</p>
                  <p>ZINEの片隅にあった小さな「□」の意味に気づいてくれたあなたにだけ、ZINEには書ききれなかった「もうひとつの話」をしようと思います。</p>
                  <p>表のブログやZINEには、「映画祭は最高！」「3日間で映画が作れる！」という楽しい部分を中心に書きました。それは決して嘘ではありません。</p>
                  <p>でも、ZINEという限られた紙面には、どうしても載せられなかったことがあります。それは、キラキラした結果に至るまでの、汗と迷いと、ちょっとカッコ悪い私の「本音」です。</p>
                  <p>正直に言うと、私はずっと「自分には何もない」「福井には何もない」と思っていました。高校も大学も第一志望じゃなかったし、なんとなく自信が持てないまま、この街で学生生活を送っていました。</p>
                  <p>だから、日和に誘われてムービーハッカソンに参加した時も、最初は「プロの現場なんて、私ごときが参加していいのかな」と、怖気づく気持ちの方が強かったんです。実際の現場は、想像以上に凄まじい熱量でした。</p>
                  <p>プロの監督やカメラマンさんは、私たち学生を「子供」扱いせず、対等な「クリエイター」として扱ってくれました。だからこそ、怖かったんです。その期待に応えられない自分が。マイクを持つ腕はパンパンになるし、自分の判断ひとつで撮影を止めてしまうかもしれないというプレッシャー。「3日間」という時間は、プロの技術とスピード感を目の当たりにするにはあまりに短く、でも一生分くらい濃い時間でした。</p>
                  <p>1日目の夜、正直「逃げたい」とも思いました。環境が嫌だったんじゃなくて、自分の不甲斐なさに押しつぶされそうだったから。それでも続けられたのは、間違いなく「人」のおかげです。真剣な眼差しで指導してくれるプロの方々、そして撮影に協力してくれた商店街や地域の人たちの温かさ。みんなで一つの画面を覗き込み、「今のカットいいね！」と笑い合った瞬間。その時初めて、私は「福井には何もない」なんて間違いだったと気づきました。ここには、こんなにも熱い人たちがいる。</p>
                  <p>映画祭当日、テアトルサンクの大きなスクリーンで上映された時、暗闇の中で、私たちが必死に繋いだ映像が光っていました。そしてエンドロール。「録音助手：柴田 葵」。その文字を見た時、涙が止まらなくなりました。自分がこの街に生きて、プロの人たちと一緒に何かを作り上げたという確かな証拠が、そこにあったからです。</p>
                  <p>△（再生）し続けた3日間の熱狂。<br>○（録画）した、ゼロから作り上げた景色。</p>
                  <p>そして今、私は一度立ち止まって、□（停止）ボタンを押します。私は来年、福井を出て海外へ行きます。かつては「ここではないどこか」へ逃げたかったけれど、今は違います。ここで得た自信と経験をお守りにして、もっと広い世界を見ていきたいからです。</p>
                  <p>もし、この文章を読んでいるあなたが、かつての私のように「何もない」と感じているなら。ぜひ、次の映画祭やムービーハッカソンに参加してみてください。きっとそこには、ZINEの写真よりもっと鮮やかで、あなたの人生を変えるような3日間が待っているはずです。</p>
                  <p>これが私の、本当の「撮影体験記」です。</p>
                  <p>読んでくれてありがとう。</p>
                  
                  <div class="truth-sign">柴田 葵</div>
                </div>
                <button 
                  onclick="window.location.href='../epilogue.html'" 
                  style="margin-top:20px; width:100%; padding:15px; background:#333; color:#fff; border:none; cursor:pointer; font-weight:bold; letter-spacing:0.1em;">
                  ログアウトして終了
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script>
    // --- 1. ナビゲーション ---
    const navItems = document.querySelectorAll('.nav-item');
    const sections = document.querySelectorAll('.view-section');
    navItems.forEach(item => {
      item.addEventListener('click', () => {
        navItems.forEach(n => n.classList.remove('active'));
        item.classList.add('active');
        const targetId = item.getAttribute('data-target');
        sections.forEach(sec => {
          sec.classList.remove('active');
          if (sec.id === targetId) sec.classList.add('active');
        });
      });
    });

    // --- 2. チャットシステム ---
    const input = document.getElementById('chat-input');
    const submitBtn = document.getElementById('chat-submit');
    const chatLog = document.getElementById('chat-history');

    const addMessage = (type, text, name = "") => {
      const msgDiv = document.createElement('div');
      msgDiv.className = `msg ${type}`;
      let html = "";
      if (name && type !== 'system') {
        const initial = name === '丹羽 日和' ? 'H' : 'A';
        html += `<div class="avatar" style="width:36px;height:36px;border-radius:50%;background:#444;color:#fff;display:flex;align-items:center;justify-content:center;margin-right:10px;">${initial}</div>`;
      }
      html += `<div class="bubble">${text}</div>`;
      msgDiv.innerHTML = html;
      chatLog.appendChild(msgDiv);
      chatLog.scrollTop = chatLog.scrollHeight;
    };

    const handleChat = () => {
      const val = input.value.trim();
      if (!val) return;
      addMessage('system', `Search Query: "${val}"`);
      input.value = '';

      setTimeout(() => {
        if (val === '304') {
          addMessage('system', '【検索結果】 重要ファイルが見つかりました。<br>ゴミ箱（Trash）のロックを解除可能です。<br>パスワード: 304');
        } else if (val.includes('△') || val.includes('三角')) {
          addMessage('hiyori', '△は『3』日間の熱狂！<br>あの日々が私たちの青春だったよね。', '丹羽 日和');
        } else if (val.includes('○') || val.includes('丸')) {
          addMessage('aoi', '○は『0』（ゼロ）。<br>経験ゼロからスタートした、あの日。', '柴田 葵');
        } else if (val.includes('□') || val.includes('四角')) {
          addMessage('system', '【Error】データ破損。<br>Hint: ZINEのあとがきの「図形」の角の数は？');
        } else if (val === '葵' || val === 'あおい') {
          addMessage('hiyori', '葵、元気かな。<br>「停止ボタン」を押してから、ずっと考えてるみたい。', '丹羽 日和');
        } else {
          addMessage('system', '該当データなし。<br>検索ヒント：△, ○, □');
        }
      }, 600);
    };

    submitBtn.addEventListener('click', handleChat);
    input.addEventListener('keydown', (e) => { if (e.key === 'Enter') handleChat(); });

    // --- 3. ゴミ箱セキュリティ ---
    const lockItem = document.getElementById('final-lock-item');
    const modal = document.getElementById('modal-trash');
    const btnFinal = document.getElementById('btn-final');
    const passFinal = document.getElementById('pass-final');
    const errorFinal = document.getElementById('error-final');
    const formArea = document.getElementById('modal-content-form');
    const truthArea = document.getElementById('modal-content-truth');

    lockItem.addEventListener('click', () => {
      modal.classList.add('open');
      passFinal.value = '';
      errorFinal.innerText = '';
      formArea.style.display = 'block';
      truthArea.classList.add('hidden');
    });

    modal.addEventListener('click', (e) => {
      if (e.target === modal) modal.classList.remove('open');
    });

    const tryUnlock = () => {
      if (passFinal.value.trim() === '304') {
        formArea.style.display = 'none';
        truthArea.classList.remove('hidden');
      } else {
        errorFinal.innerText = 'Passcode Incorrect.';
        passFinal.value = '';
      }
    };

    btnFinal.addEventListener('click', tryUnlock);
    passFinal.addEventListener('keydown', (e) => { if (e.key === 'Enter') tryUnlock(); });
  </script>
</body>
</html>